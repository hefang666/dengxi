<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/public.css" />
		<link rel="stylesheet" href="css/biaoqian.css" />
		<link rel="stylesheet" type="text/css" href="css/my-shopping-car.css"/>
		<script type="text/javascript "src="js/tools.js">
			
		</script>
		<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
		
	</head>
	<body>
		<div class="content my-shopping-car-big-box">
			<div class="my-shopping-car-headline font-14 fontwight-700 border">
				我的购物车
			</div>
			<div class="my-shopping-car-header border font-12 background-fff9f5">
				<input type="checkbox" name="" id="" value="" /> <span class="all">全选</span>
				<span class="commodity">商品</span>
				<span class="one-price">单价</span>
				<span class="count">数量</span>
				<span class="all-price">金额</span>
				<span class="operation">操作</span>
			</div>
			<!--数据名称栏结束-->
			<!--所有商品-->
			<div class="all-commodity-box border-bottom">
			<!--商店类型-->
			<div class="store-calssfity font-12">
				<input type="checkbox" name="" id="" value="" /> <span>         
				店铺：洋货码头自营
				</span>
			</div>
			<!--购物车里每一件商品-->
			<div class="shoping-car-commodity-box border">
				<input type="checkbox" name="" class="selection-commodity" value="" />
				<img src="img/commodity1.png"/>
				<span class="shoping-car-commodityname font-14 ">
					此处是商品名称，最多显示两排，如有超出隐藏
				</span>
				<!--商品基本信息-->
				<div class="commodity-information">
					<img src="img/gray-pen-icon.jpg"/>
					<p class="color">颜色：蓝色</p>
					<p class="size">尺寸：XXL</p>
				</div>
				<!--价格-->
				<div class="commodity-one-price">
					<span class="over-price font-12 ">￥233.00</span>
					<span class="font-14 fontwight-700">￥189.00</span>
					<span class="buy font-12">
						团购
					</span>
				</div>
				<!--数量-->
				<div class="commodity-count-box border font-12">
					<a class="reduce">-</a>
					<a class="count"> 1 </a>
					<a class="add">+</a>
				</div>
				<!--金额-->
				<span class="actually-money font-14">￥189.00</span>
				<!--商品操作-->
				<div class="commodity-operation-box">
					<a>移入我的收藏夹</a>
					<a class="delete">删除</a>
					
				</div>
			</div>
			<!--价格详情-->
			<div class="price-detail-box">
				<div class="price-detail-text-box">
					<span class="active-reduce">
						活动优惠：-￥44.00
					</span>
					<span class="commodity-act-price">商品应付小计：￥189.00</span>
					<span class="tax-price">预估税费：￥10.00</span>
				</div>
			</div>
			<!--购物车里每一件商品-->
			<div class="shoping-car-commodity-box border ">
				<input type="checkbox" name="" class="selection-commodity" value="" />
				<img src="img/commodity1.png"/>
				<span class="shoping-car-commodityname font-14 ">
					此处是商品名称，最多显示两排，如有超出隐藏
				</span>
				<!--商品基本信息-->
				<div class="commodity-information">
					<img src="img/gray-pen-icon.jpg"/>
					<p class="color">颜色：蓝色</p>
					<p class="size">尺寸：XXL</p>
				</div>
				<!--价格-->
				<div class="commodity-one-price">
					<span class="over-price font-12 ">￥233.00</span>
					<span class="font-14 fontwight-700">￥189.00</span>
					<span class="buy font-12">
						团购
					</span>
				</div>
				<!--数量-->
				<div class="commodity-count-box border font-12">
					<a class="reduce">-</a>
					<a class="count"> 1 </a>
					<a class="add">+</a>
				</div>
				<!--金额-->
				<span class="actually-money font-14">￥189.00</span>
				<!--商品操作-->
				<div class="commodity-operation-box">
					<a>移入我的收藏夹</a>
					<a class="delete">删除</a>
					
				</div>
			</div>
			<!--价格详情-->
			<div class="price-detail-box">
				<div class="price-detail-text-box">
					<span class="active-reduce">
						活动优惠：-￥44.00
					</span>
					<span class="commodity-act-price">商品应付小计：￥189.00</span>
					<span class="tax-price">预估税费：￥10.00</span>
				</div>
			</div>
			<!--购物车里每一件商品-->
			<div class="shoping-car-commodity-box border ">
				<input type="checkbox" name="" class="selection-commodity" value="" />
				<img src="img/commodity1.png"/>
				<span class="shoping-car-commodityname font-14 ">
					此处是商品名称，最多显示两排，如有超出隐藏
				</span>
				<!--商品基本信息-->
				<div class="commodity-information">
				    <img src="img/gray-pen-icon.jpg"/>
					<p class="color">颜色：蓝色</p>
					<p class="size">尺寸：XXL</p>
				</div>
				<!--价格-->
				<div class="commodity-one-price">
					<span class="over-price font-12 ">￥233.00</span>
					<span class="font-14 fontwight-700">￥189.00</span>
					<span class="buy font-12">
						团购
					</span>
				</div>
				<!--数量-->
				<div class="commodity-count-box border font-12">
					<a class="reduce">-</a>
					<a class="count"> 1 </a>
					<a class="add">+</a>
				</div>
				<!--金额-->
				<span class="actually-money font-14">￥189.00</span>
				<!--商品操作-->
				<div class="commodity-operation-box">
					<a>移入我的收藏夹</a>
					<a class="delete">删除</a>
					
				</div>
			</div>
			<!--价格详情-->
			<div class="price-detail-box">
				<div class="price-detail-text-box">
					<span class="active-reduce">
						活动优惠：-￥44.00
					</span>
					<span class="commodity-act-price">商品应付小计：￥189.00</span>
					<span class="tax-price">预估税费：￥10.00</span>
				</div>
			</div>
			
			</div>
			
			<!--总结算-->
			<div class="clearling-box border clearfix">
				<div class="delete-box">
				<input type="checkbox" name="" id="" value=""  /> <span class="all-delete">全选</span>
				<span class="delete-conmmodity">删除选中商品</span>
				</div>
				<!--结算按钮-->
				<div class="btn-clearing">
					去结算
				</div>
				<div class="text-center-box">
					<p> 
						<span class="selected-commodity">商品总数<span class="font-14 fontwight-700 text-color-ff2d52 all-count">2</span>件 </span>
						<span class="all-money-text">总价(不含运费)：</span>
						<span class="all-money fontwight-700 font-14 text-color-ff2d52">￥378.00</span>
						
					</p>
					<a> 
						<span class="active-reduce">
							活动优惠：-￥44.00
						</span>
						<span class="commodity-act-price">商品应付小计：￥189.00</span>
						<span class="tax-price">预估税费：￥10.00</span>
					</a>
				</div>
				
			</div>
			<!--猜你喜欢部分-->
			<div class="your-like-commodity-box">
				<div class="your-like-commodity-header-box border">
					<span class="title">猜你喜欢</span>
					<span class="change-text font-12 floatr">换一批</span>
					<span class="change-icon floatr">
						<img src="img/changeicon.jpg"/>
					</span>
				</div>
				
				<div class="your-like-commodity-body-box clearfix">
					<!--每一个喜欢的商品-->
					<div class="your-like-commodity">
						<img src="img/commodity1.png"  width="180px" height="180px">
						<p class="your-like-commodity-name font-12">此处为商品名，最多显示两排，如有超出隐藏</p>
						<p class="your-like-commodity-price font-14 text-color-ff2d52 fontwight-700">￥1599.00</p>
					</div>
					<!--每一个喜欢的商品-->
					<div class="your-like-commodity">
						<img src="img/commodity1.png"  width="180px" height="180px">
						<p class="your-like-commodity-name font-12">此处为商品名，最多显示两排，如有超出隐藏</p>
						<p class="your-like-commodity-price font-14 text-color-ff2d52 fontwight-700">￥1599.00</p>
					</div>
					<!--每一个喜欢的商品-->
					<div class="your-like-commodity">
						<img src="img/commodity1.png"  width="180px" height="180px">
						<p class="your-like-commodity-name font-12">此处为商品名，最多显示两排，如有超出隐藏</p>
						<p class="your-like-commodity-price font-14 text-color-ff2d52 fontwight-700">￥1599.00</p>
					</div>
					<!--每一个喜欢的商品-->
					<div class="your-like-commodity">
						<img src="img/commodity1.png"  width="180px" height="180px">
						<p class="your-like-commodity-name font-12">此处为商品名，最多显示两排，如有超出隐藏</p>
						<p class="your-like-commodity-price font-14 text-color-ff2d52 fontwight-700">￥1599.00</p>
					</div>
					<!--每一个喜欢的商品-->
					<div class="your-like-commodity">
						<img src="img/commodity1.png"  width="180px" height="180px">
						<p class="your-like-commodity-name font-12">此处为商品名，最多显示两排，如有超出隐藏</p>
						<p class="your-like-commodity-price font-14 text-color-ff2d52 fontwight-700">￥1599.00</p>
					</div>
					<!--每一个喜欢的商品-->
					<div class="your-like-commodity">
						<img src="img/commodity1.png"  width="180px" height="180px">
						<p class="your-like-commodity-name font-12">此处为商品名，最多显示两排，如有超出隐藏</p>
						<p class="your-like-commodity-price font-14 text-color-ff2d52 fontwight-700">￥1599.00</p>
					</div>
				</div>
				
			</div>
		</div>	
	</body>
</html>
<script type="text/javascript">
    bodysize();
 //点击商品之后让背景变成红色，并且商品的样式可调
 				var strcount;
				var commoditycount;
				var arrprice;
				var allmoney;
				//商品数量叠加选框
 				var reduce = $(this).siblings('.commodity-count-box').children('.reduce');
 				var add = $(this).siblings('.commodity-count-box').children('.add');
 				var count = $(this).siblings('.commodity-count-box').children('.count').text();
 				var oneprice = Number($(this).siblings('.commodity-one-price').children('.fontwight-700').text().substr(1,6));
 				var activereduce = $(this).parent().next().children().children('.active-reduce');
 				var buymoney = $(this).parent().next().children().children('.commodity-act-price');
 				var taxmoney = $(this).parent().next().children().children('.tax-price');
 				var actuallymoney = $(this).siblings('.actually-money');
 				changeCountMoney();
 $(document).ready(function(){
// 	商品input框选中
 	$('.shoping-car-commodity-box input').click(function(){
 		//背景变色
 		var className = $(this).parent().attr('class');
 		if(className.indexOf('background-fff9f5') == -1)
 			{
 				$(this).parent().addClass('background-fff9f5');
 				$(this).siblings('.commodity-information').css({
 					border : '1px dashed #cccccc'
 				})
 				//商品样式选框变成红色
 				$(this).siblings('.commodity-information').click(function()
 					{
   					var bordercolor = $(this).css("border-color");
   					if(bordercolor == 'rgb(204, 204, 204)')
   					{
// 						改变商品信息部分
   					$(this).css({
   					border : '1px dashed #ff2d52',
   					})
   					
   					$(this).children('img').remove();
   					var a = $("<a></a>").text("修改");
   					$(this).prepend(a);
   					$(this).children('a').css({
   						display:'inline-block',
   						background:'#ff2d52',
   						width : '32px',
   						height:'22px',
   						border:'none',
   						marginLeft: '115px',
   						fontSize: '12px',
   						color:'#ffffff',
   						textAlign:'center',
   					})
// 					改变商品的数量
   					}
   					else
   					{
   						//改变商品信息部分
   					$(this).css({
   					border : '1px dashed #cccccc',
   					})
   					$(this).children('a').remove();
   					var img = $("<img>");
   					$(this).prepend(img);
   					$(this).children('img').attr('src', 'img/gray-pen-icon.jpg')
   					$(this).children('img').css({
   						width: '20px',
						height: '20px',
						display: 'inline-block',
						marginLeft: '126px',
   					})
   					}
 				})
 				//商品数量叠加选框
   				var reduce = $(this).siblings('.commodity-count-box').children('.reduce');
   				var add = $(this).siblings('.commodity-count-box').children('.add');
   				var count = $(this).siblings('.commodity-count-box').children('.count').text();
   				var oneprice = Number($(this).siblings('.commodity-one-price').children('.fontwight-700').text().substr(1,6));
   				var activereduce = $(this).parent().next().children().children('.active-reduce');
   				var buymoney = $(this).parent().next().children().children('.commodity-act-price');
   				var taxmoney = $(this).parent().next().children().children('.tax-price');
   				var actuallymoney = $(this).siblings('.actually-money');
// 				
// 				添加商品和减少商品事件
   				reduce.click(function(){
   					if(count > 1){
   						count--;
   						$(this).siblings('.count').text( ' ' + count + ' ');
   						actuallymoney.text('￥'+ count * oneprice + '.00')
   						activereduce.text('活动优惠：-￥'+ 44 * count + '.00' )
   						buymoney.text('商品应付小计：￥'+ count * oneprice + '.00')
   						taxmoney.text('预估税费：￥' + 10 * count + '.00')
   						}
   					// 	取出所有商品的数量,并装入一个字符串之中
					 	changeCountMoney();
					 	
   					})
   				
   				add.click(function(){
   					count++;
   				$(this).siblings('.count').text( ' ' + count + ' ');
   				actuallymoney.text('￥'+ count * oneprice + '.00')
   				activereduce.text('活动优惠：-￥'+ 44 * count + '.00' )
   				buymoney.text('商品应付小计：￥'+ count * oneprice + '.00')
   				taxmoney.text('预估税费：￥' + 10 * count + '.00')
   				// 	取出所有商品的数量,并装入一个字符串之中
					 	changeCountMoney();
   				})
 			}
 		else 
 		{		
// 				当取消对商品的选中时,恢复成原来的样子
	 			$(this).parent().removeClass('background-fff9f5');
	 			$(this).siblings('.commodity-information').css({
	 				border : 'none'
	 			})
//	 			取消商品选中时,取消事件
	 			$(this).siblings('.commodity-information').unbind();
	 			$(this).siblings('.commodity-count-box').children('.reduce').unbind();
	 			$(this).siblings('.commodity-count-box').children('.add').unbind();
 				$(this).children('a').remove();
   					var img = $("<img>");
   					$(this).prepend(img);
   					$(this).children('img').attr('src', 'img/gray-pen-icon.jpg')
   					$(this).children('img').css({
   						width: '20px',
						height: '20px',
						display: 'inline-block',
						marginLeft: '126px',
   					}) 
 		}
 	})
// 	点击删除后,删掉这个块元素
 	$('.delete').click(function(){
 		$(this).parent().parent().css('display','none')
 		$(this).parent().parent().next().css('display','none')
 		$(this).parent().parent().next().remove()
 		$(this).parent().parent().remove();
 		changeCountMoney();			
 	})

 })
 //总结算获取值得函数
 function changeCountMoney(){
 	commoditycount = 0;
 	allmoney = 0;
 	strcount =  ($('a.count').text())
 	var arrcount = strcount.split(' ')
 	for(var i = 0;i < arrcount.length;i++)
 	{	
 	
 	
 	commoditycount = commoditycount + Number(arrcount[i])
 	
 	}
 	$('.all-count').text(commoditycount);
 	arrprice = $('.actually-money').text().split('￥');
 	for (var j = 0;j <=$('.actually-money').length;j++ ) {
 		console.log( Number(arrprice[j]))
 		allmoney = allmoney + Number(arrprice[j])
 		
 	}
 	$('span.all-money').text(allmoney + '.00');
 }
 //点击之后判断是否被选中，将所有的商品选中
 $('.delete-box input').click(function(){
 	if($(this).is(':checked')){
 		$('.selection-commodity').attr('checked','')
 	}
 })
 //
var clearmoney = 'clearmoney.html'
$('.btn-clearing').click(function(){
	window.parent.$('iframe').attr('src',clearmoney)
})
</script>
